(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main-account-connectwechat"],{"26a3":function(t,i,e){"use strict";e.r(i);var n=e("50ba"),a=e("ec3d");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("8a01");var s=e("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"51171aae",null,!1,n["a"],void 0);i["default"]=c.exports},"3d5d":function(t,i,e){t.exports=e.p+"static/img/logo.0cce880a.png"},"50ba":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var n=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("v-uni-view",{style:t.COLORTHEMECOMMON},[n("v-uni-view",{staticClass:"pagecontent",style:t.COLORTHEMESTYLE},[t.WAIT.show?n("v-uni-view",{staticClass:"WaitingModel"},[n("v-uni-view",{staticClass:"WaitingModelWin"},[n("v-uni-view",{staticClass:"WaitingModelTitle"},[t._v(t._s(t.WAIT.title))]),n("v-uni-view",{staticClass:"WaitingModelSubtitle"},[t._v(t._s(t.WAIT.subtitle))]),n("v-uni-view",{staticClass:"WaitingModelTime"},[t._v(t._s(t.WAIT.time))]),t.WAIT.cannotCancal?t._e():n("v-uni-button",{staticClass:"WaitingModelCancel",attrs:{disabled:t.WAIT.WAITCANCEL},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.hideWait(!1)}}},[t._v(t._s(t.WAIT.WAITCANCEL?t.WAIT.WAITEND?"即将完成":"正在取消":t.WAIT.buttontitle))])],1)],1):t._e(),n("v-uni-view",{staticStyle:{"justify-self":"center",display:"flex","flex-direction":"column"}},[n("v-uni-view",{staticStyle:{"justify-content":"center","align-items":"center",display:"flex"}},[n("v-uni-image",{staticStyle:{height:"400rpx"},attrs:{src:e("3d5d"),mode:"aspectFit"}})],1),n("v-uni-view",{staticClass:"subtitle",staticStyle:{margin:"30rpx auto 0 auto","font-size":"45rpx"}},[t._v("绑定您在旧版本中的微信账号")]),n("v-uni-view",{staticClass:"subtitle",staticStyle:{margin:"10rpx auto","font-size":"30rpx",width:"90%","text-align":"center"}},[t._v("绑定后使用微信小程序端将可以自动登录，您账户历史数据将关联到您的新账号中")]),n("v-uni-view",{staticStyle:{"margin-top":"20rpx"}},[n("v-uni-button",{staticClass:"BTNline",staticStyle:{"white-space":"pre","font-size":"40rpx",margin:"30rpx auto",width:"700rpx"},attrs:{disabled:t.LOADINGREG},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.UserRegPreCurrent()}}},[t.LOADINGREG?[n("v-uni-image",{staticClass:"loadingBTNicon",staticStyle:{"margin-right":"10rpx"},attrs:{src:e("9215"),mode:"aspectFit"}})]:t._e(),t.LOADINGREG?t._e():n("v-uni-view",{staticClass:"btnicon iconfont icon-denglu",staticStyle:{"margin-right":"15rpx","font-size":"40rpx"}}),t._v("使用当前微信账户")],2)],1),t.tempUserOtherWechat?t._e():n("v-uni-view",{staticStyle:{"margin-top":"10rpx"}},[n("v-uni-button",{staticClass:"BTNline",staticStyle:{"white-space":"pre","font-size":"40rpx",margin:"30rpx auto",width:"700rpx"},attrs:{disabled:t.LOADINGREG},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.UseOtherAccount()}}},[n("v-uni-view",{staticClass:"btnicon iconfont icon-denglu",staticStyle:{"margin-right":"15rpx","font-size":"40rpx"}}),t._v("使用其他微信账户")],1)],1),t.tempUserOtherWechat?[n("v-uni-view",{staticClass:"formLine"},[n("v-uni-view",{staticClass:"subtitle",staticStyle:{"margin-left":"10rpx"}},[t._v("OPENID")]),n("v-uni-input",{staticClass:"formInput",attrs:{placeholder:"原始账户OPENID",id:"email",disabled:t.LOADINGREG,value:t.UserEmail},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.EmailInput.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticStyle:{margin:"20rpx"}},[n("v-uni-button",{staticClass:"BTNline",staticStyle:{"white-space":"pre","font-size":"40rpx",margin:"30rpx auto",width:"700rpx"},attrs:{disabled:t.LOADINGREG},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.UserRegPre()}}},[t.LOADINGREG?[n("v-uni-image",{staticClass:"loadingBTNicon",staticStyle:{"margin-right":"10rpx"},attrs:{src:e("9215"),mode:"aspectFit"}})]:t._e(),t.LOADINGREG?t._e():n("v-uni-view",{staticClass:"btnicon iconfont icon-denglu",staticStyle:{"margin-right":"15rpx","font-size":"40rpx"}}),t._v("绑定")],2)],1)]:t._e()],2)],1)],1)},a=[]},"84df":function(t,i,e){"use strict";(function(t){e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("a9e3");var n=e("51b3"),a=e("460c"),o=null,s=getApp(),c=s.globalData,r=(c.ENCRYPTO,t.database()),u=(r.collection("ProgramSet"),r.collection("Users")),l=(e("d3e5"),{data:function(){return{LOADINGREG:!1,COLORTHEMECOMMON:c.COLORTHEMECOMMON,COLORTHEME:c.COLORTHEME,COLORTHEMESTYLE:c.COLORTHEMESTYLE,THEMEID:c.THEMEID,THEMETYPE:c.THEMETYPE,THEMELIST:c.THEMELIST,VERSION:c.VERSION,AD:c.AD,UserPasswordEnsure:"",UserPassword:"",UserEmail:"",tempUserOtherWechat:!1,DataInput:{IDNO:"",RealName:""},WAITCANCEL:!1,WAIT:{show:!1,title:"",subtitle:"",time:"00:00",sec:0,buttontitle:"",cancelfun:null,hasCancel:!1,cannotCancal:!1,WAITEND:!1,WAITCANCEL:!1},WAITEND:void 0}},onLoad:function(t){o=this,o.PageReflesh()},methods:{UseOtherAccount:function(){o.tempUserOtherWechat=!0},InputData:function(t){var i=t.currentTarget.dataset.id;console.log(i,t.detail.value),o.DataInput[i]=t.detail.value},PageReflesh:function(){c.RefleshGlobalData(),uni.setNavigationBarColor({backgroundColor:c.COLORTHEME["--color-main"],frontColor:c.COLORTHEME["--color-navitext"]}),c.ServerReady((function(){c.USERLOGIN||uni.showModal({title:"请登录后再尝试绑定",showCancel:!1,success:function(t){t.confirm&&uni.reLaunch({url:"/pages/index/index"})}})}))},UserRegPreCurrent:function(){a.showFail({errMsg:"在当前版本下不支持调用微信，请使用微信小程序进行当前账户的绑定，或者点击使用其他微信账户进行绑定"},"绑定")},UserRegPre:function(){var t=o.UserEmail,i=function(t){uni.hideLoading(),uni.showModal({title:"绑定失败",content:t,showCancel:!1})};""!=t?isNaN(Number(t))?o.UserReg():i("请输入合法的OPENID"):i("请输入原始账户OPENID")},UserReg:function(){o.LOADINGREG=!0;var t=o.UserEmail;uni.showLoading({title:"检验合法",mask:!0});var i=function(){uni.hideLoading(),uni.showModal({title:"确认绑定账户",content:"OPENID："+t+"\n绑定后不可修改",confirmText:"绑定",success:function(i){if(i.cancel&&(o.LOADINGREG=!1),i.confirm){var e=c.USERDATA._id;console.log(c.USERDATA);var s={_openid:t};(0,n.cbq)(u.doc(e).update(s),{success:function(i){console.log(i),c.USERDATA._openid=t,c.USEROPENID=t,uni.showModal({title:"绑定成功",showCancel:!1,success:function(){uni.navigateBack()}})},fail:function(t){a.showFail(t,"绑定")},complete:function(t){o.LOADINGREG=!1}})}}})};(0,n.cbq)(u.where({_openid:t}).get(),{success:function(e){if(console.log(e.data),e.data.length>=1){console.log(e.data[0]);var s=e.data[0];if("string"!=typeof s.account){var c=s._id;(0,n.cbq)(u.doc(c).update({_openid:c,oldopenid:t}),{success:function(t){i()},fail:function(t){uni.hideLoading(),a.showFail(err,"绑定"),o.LOADINGREG=!1}})}else uni.hideLoading(),a.showFail({errMsg:"该微信已经被其他用户绑定"},"绑定"),o.LOADINGREG=!1}else i()},fail:function(t){uni.hideLoading(),o.LOADINGREG=!1,a.showFail(t,"绑定")}})},PasswordEnsureInput:function(t){var i=t.detail.value;o.UserPasswordEnsure=i},PasswordInput:function(t){var i=t.detail.value;o.UserPassword=i},EmailInput:function(t){var i=t.detail.value;o.UserEmail=i},hideWait:function(t){c.hideWait(o.WAIT,t)}}});i.default=l}).call(this,e("a9ff")["default"])},"8a01":function(t,i,e){"use strict";var n=e("c960"),a=e.n(n);a.a},9215:function(t,i){t.exports="data:image/gif;base64,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"},"9d8f":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".subtitle[data-v-51171aae]{font-size:%?40?%}.formInput[data-v-51171aae]{text-align:left;font-size:%?40?%;margin-left:%?20?%;width:%?380?%}.formLine[data-v-51171aae]{align-items:center;display:flex;margin:%?30?% auto 0 auto;justify-content:space-between;width:%?700?%}",""]),t.exports=i},c960:function(t,i,e){var n=e("9d8f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("a1e831e8",n,!0,{sourceMap:!1,shadowMode:!1})},d3e5:function(t,i,e){"use strict";e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.ca=void 0,i.request=r,i.showFail=c;e("51b3"),e("460c");var n=getApp(),a=n.globalData,o=a.ENCRYPTO,s="加载";function c(t,i){"string"!=typeof i&&(i=s),uni.hideLoading(),uni.showModal({title:i+"失败",content:t,showCancel:!1})}function r(t){var i,e,n,r,u=t.title,l=t.tipShow,A=t.tipOption,d=t.tipActionCancel,f=t.tipActionSuccess,p=(t.packPublicKey,t.data),v=t.keyOption,g=t.optionUrl,h=t.urlPath,E=t.success,I=t.fail;if("boolean"!=typeof l&&(l=!0),"string"!=typeof u&&(u="加载"),s=u,console.log("开始请求",u,t),l){if(!A)return void console.error("使用tipShow请传入tipOption");if(i=A.WAIT,e=A.tipText,n=A.tipSubText,r=A.cancelText,!i)return void console.error("使用tipShow请传入tipOption.WAIT，请使用当前显示页面的WAITObj！");e||(e="正在"+u),n||(n="请稍后"),r||(r="取消")}var w={};l&&a.showWait(i,e,n,r,(function(t,i){if(t){if("function"==typeof f&&f(i))return;i()}else{if("function"==typeof w.abort&&w.abort(),"function"==typeof d&&d(i))return;i()}})),console.log("keyoption=",v);var L=o.cover.packData(p,!0,v),C="http://"+a.ServerUrl+"/"+a.AppServerName+"/"+h;console.log(h),g&&(C=h),console.log(C),w=uni.request({url:C,method:"POST",header:{"content-type":"application/json"},data:L,responseType:"json",sslVerify:!1,firstIpv4:!0,success:function(t){if(console.log("收到数据",t),200!=t.statusCode)return l&&a.hideWait(i,!1),void c("服务器错误："+t.data.error,u);var e=o.cover.unpackData(t.data),n=function(t){"boolean"!=typeof t&&(t=!0),l&&a.hideWait(i,t)};"function"==typeof E&&E(e,n)||n()},fail:function(t){console.log("请求失败",t);var e=function(){(l||"function"!=typeof I)&&c("错误："+t.errMsg,u),l&&a.hideWait(i,!1)};"function"==typeof I&&(l&&c("错误："+t.errMsg,u),I(t,e))||e()}})}var u=e("ffcd"),l=e("1818"),A={getPublicKey:u.ca.getPublicKey,getPublicSignKey:u.ca.getPublicSignKey,querySignValid:function(t,i,e){return uni.showLoading({title:"签名验证中"}),l.verifySign(t,i,this.getPublicSignKey())?(console.log(a.CAURL),r({tipShow:!1,title:"验证签名",optionUrl:!0,urlPath:a.CAURL+"queryB",keyOption:this.getPublicKey(),data:{certificate:i},success:function(i,n){if(uni.hideLoading(),i.status){if(1==i.data){var a=JSON.parse(t).data;e(a)}else e("");n(!0)}else n(!1),server.showFail(i.errMsg);return!0},fail:function(){uni.hideLoading(),e("")}}),!0):(uni.hideLoading(),!1)}};i.ca=A},ec3d:function(t,i,e){"use strict";e.r(i);var n=e("84df"),a=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a}}]);