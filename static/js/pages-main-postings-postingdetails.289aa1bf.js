(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main-postings-postingdetails"],{1758:function(e,t,o){"use strict";o.r(t);var n=o("2455"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},2455:function(e,t,o){"use strict";(function(e){o("7a82");var n=o("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o("53ca")),s=n(o("ade3"));o("4d63"),o("c607"),o("ac1f"),o("2c3e"),o("25f0"),o("5319"),o("a9e3"),o("14d9");var a=o("51b3"),r=o("460c"),l=null,c=getApp(),d=c.globalData,u=(d.ENCRYPTO,e.database()),p=(u.collection("ProgramSet"),u.collection("Users"),o("d3e5"),u.collection("postings")),f=null,v=null,h="",g=function(e,t){return new RegExp(e,t)},m={data:function(){return{m:{dealPostContent:function(e){return e=e.replace(/[<]img.*?[>]/g,"[图片]"),e=e.replace(/<font linkstart>/g,'<font style="color: var(--color-link)">').replace(/<font linkend>/g,"</font>"),e},dealPost:function(e){return e=e.replace(g("[<]img.*?[>]","g"),"[图片]"),e=e.replace(g("<font linkstart>","g"),'<font style="color: var(--color-link)">').replace(g("<font linkend>","g"),"</font>"),e}},COLORTHEMECOMMON:d.COLORTHEMECOMMON,COLORTHEME:d.COLORTHEME,COLORTHEMESTYLE:d.COLORTHEMESTYLE,THEMEID:d.THEMEID,THEMETYPE:d.THEMETYPE,THEMELIST:d.THEMELIST,VERSION:d.VERSION,AD:d.AD,APPSET:{},reinputvalue:"",showRe:!1,response:null,responseto:null,responsefloor:{},re_holder:"",posting:null,sort_modeid:2,sort_mode:["时间正序","时间倒序","热度倒序"],isLogin:d.USERLOGIN,SUPERADMIN:"",hideDel:"",writer:"",tip:""}},onLoad:function(e){d.USERDATA.powerid>2&&(d.USERDATA.superadmin=!0),this.onLoadClone3389(e)},onReady:function(){},onShow:function(){this.setData({isLogin:d.USERLOGIN})},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){r.isTimeLimit("帖子详情页面",10,"刷新频率限制")&&this.Reflesh()},onReachBottom:function(){},onShareAppMessage:function(){},methods:{onLoadClone3389:function(e){l=this,d.RefleshGlobalData(),uni.setNavigationBarColor({backgroundColor:d.COLORTHEME["--color-main"],frontColor:d.COLORTHEME["--color-navitext"]}),uni.showLoading({mask:!0,title:"加载中"}),this.setData({APPSET:d.AppSet,SUPERADMIN:d.USERDATA.superadmin}),uni.hideLoading({success:function(e){}}),d.AppSet.POSTOPEN?(h="",v=e.postid,void 0!==e.postid?(r.isTimeLimit("帖子详情页面",10,void 0),this.Reflesh()):uni.showModal({title:"错误",content:"链接不存在",showCancel:!1,success:function(e){1!=getCurrentPages().length?uni.navigateBack({delta:0}):uni.reLaunch({url:"/pages/index/index"})}})):uni.showModal({success:function(e){1!=getCurrentPages().length?uni.navigateBack({delta:0}):uni.reLaunch({url:"/pages/index/index"})},title:"功能关闭",content:"贴吧模块暂时关闭，此内容暂时无法查看",showCancel:!1})},cal_sort:function(e,t,o){var n=0,i=0,s=0;for("boolean"!==typeof o&&(o=!0),n=0;n<e.length;n++)for(i=0;i<e.length;i++)"likes"===t?(o?e[n][t].length>e[i][t].length:e[n][t].length<e[i][t].length)&&(s=e[n],e[n]=e[i],e[i]=s):(o?e[n][t]>e[i][t]:e[n][t]<e[i][t])&&(s=e[n],e[n]=e[i],e[i]=s);return e},changeSortMode:function(e){this.sort_modeid++,this.sort_modeid>=this.sort_mode.length&&(this.sort_modeid=0);var t=this.sort_mode[this.sort_modeid];"时间倒序"==t&&(l.response=l.cal_sort(l.response,"time",!0)),"热度倒序"==t&&(l.response=l.cal_sort(l.response,"likes",!0)),"时间正序"==t&&(l.response=l.cal_sort(l.response,"time",!1)),this.setData({response:this.response,sort_modeid:this.sort_modeid})},delReConfirm:function(t,o){var n="该内容已被用户删除";if(d.USERDATA.superadmin&&(t=!0,n="该内容已被管理员删除"),t)uni.showModal({title:"删除回复",content:"确认要删除该回复吗？删除回复并不删除楼层，仅仅隐藏回复内容。",success:function(e){if(e.confirm){uni.showLoading({title:"删除回复",mask:!0});var t=o[0];if("R"==t)(0,a.cbq)(p.doc(v).update({reStatus:n}),{success:function(e){var t=l.posting;t.reStatus=n,l.ConfrimSuccess({result:{doc:t}})},complete:l.ConfrimComplete,fail:l.ConfrimFail});else if("RE"==t){var i=Number(o[1]);(0,a.cbq)(p.doc(v).update((0,s.default)({},"response",(0,s.default)({},i,{reStatus:n}))),{success:function(e){var t=l.posting;t.response[i].reStatus=n,l.ConfrimSuccess({result:{doc:t}})},complete:l.ConfrimComplete,fail:l.ConfrimFail})}else if("RRE"==t){i=Number(o[1]);var r=Number(o[2]),c=l.responsefloor[i][r].index;(0,a.cbq)(p.doc(v).update((0,s.default)({},"responseto",(0,s.default)({},Number(c),{reStatus:n}))),{success:function(e){var t=l.posting;t.responseto[Number(c)].reStatus=n,l.ConfrimSuccess({result:{doc:t}})},complete:l.ConfrimComplete,fail:l.ConfrimFail})}}}});else{u.command;uni.showModal({title:"举报",content:"确认要举报该内容吗？",success:function(t){if(t.confirm){var n=d.USERDATA.uid;uni.showLoading({title:"举报",mask:!0});var i=o[0];if("R"==i)e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"reportPeo",data:n},success:l.ConfrimSuccess,complete:l.ConfrimComplete,fail:l.ConfrimFail});else if("RE"==i){var s=Number(o[1]);e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"response."+s+".reportPeo",data:n},success:l.ConfrimSuccess,complete:l.ConfrimComplete,fail:l.ConfrimFail})}else if("RRE"==i){s=Number(o[1]);var a=Number(o[2]),r=l.responsefloor[s][a].index;e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"responseto."+Number(r)+".reportPeo",data:n},success:l.ConfrimSuccess,complete:l.ConfrimComplete,fail:l.ConfrimFail})}}}})}},delRe:function(e,t){if(console.log(e,t),d.USERLOGIN&&t){var o=e.currentTarget.dataset.id.split("_"),n=o[0];if("R"==n)this.delReConfirm(this.posting.writer.openid==d.openid,o);else if("RE"==n){for(var i=Number(o[1]),s=0;s<this.response.length;s++)if(this.response[s].floor==i)return this.delReConfirm(this.response[s].openid==d.openid,o)}else if("RRE"==n){i=Number(o[1]);var a=Number(o[2]);return this.delReConfirm(this.responsefloor[i][a].openid==d.openid,o)}}},getname:function(e,t,o){if("R"==e)return"";if("RE"==e){for(var n=0;n<this.response.length;n++)if(this.response[n].floor==t)return this.response[n].name}else if("RRE"==e)return"";return""},getReText:function(e){var t=e.opt,o=e.id;if("R"==t)return"回复帖子";if("RE"==t){var n=Number(o[1]);return"回复："+this.getname(t,n,i)+"（"+(n+1)+"楼）"}if("RRE"==t){n=Number(o[1]);var i=Number(o[2]);return"回复："+this.responsefloor[n][i].name+"（"+(n+1)+"."+(i+1)+"楼）"}return"回复"},showReBar:function(e,t){f=t,this.setData({showRe:e,re_holder:e?this.getReText(t):""})},Rechange:function(e){h=e.detail.value},ConfrimSuccess:function(e){console.log(e),h="",this.setData({reinputvalue:""}),console.log(e),this.Reflesh(e.result.doc),uni.showToast({title:"成功"}),this.showReBar(!1)},ConfrimComplete:function(e){console.log(e)},ConfrimFail:function(e){uni.hideLoading({success:function(e){}}),uni.showModal({title:"发送失败",content:e.errMsg,showCancel:!1}),console.log(e)},hideDelFun:function(e){this.setData({hideDel:!this.hideDel})},REupload:function(t){var o=f,n=o.opt,i=o.id,s={time:r.getTime(),likes:[],content:h,name:d.USERDATA.name,openid:d.USERDATA.openid},a=(u.command,{toUser:"",content:""});if(uni.showLoading({title:"回复帖子",mask:!0}),"R"==n)a.content=" 回复你："+s.content,a.toUser=this.posting.writer.openid,e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"response",data:s},success:l.ConfrimSuccess,complete:l.ConfrimComplete,fail:l.ConfrimFail});else if("RE"==n){var c=Number(i[1]);s.tofloor=c,a.content=" 回复你："+s.content,a.toUser=this.response[c].openid,e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"responseto",data:s},success:l.ConfrimSuccess,complete:l.ConfrimComplete,fail:l.ConfrimFail})}else if("RRE"==n){c=Number(i[1]);var p=Number(i[2]);s.tofloor=c,a.content="回复你（"+(c+1)+"."+(p+1)+"楼）： "+s.content,s.content="回复 <font linkstart>"+this.responsefloor[c][p].name+"</font linkend>（"+(c+1)+"."+(p+1)+"楼）： "+s.content,a.toUser=this.responsefloor[c][p].openid,e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"responseto",data:s},success:l.ConfrimSuccess,complete:l.ConfrimComplete,fail:l.ConfrimFail})}},ReComfirm:function(e){h.length<3?uni.showModal({showCancel:!1,title:"提示",content:"请至少输入3个字"}):l.REupload(e)},Response:function(e){var t=e.currentTarget.dataset.id.split("_"),o=t[0];if("R"==o);else if("RE"==o)Number(t[1]);else if("RRE"==o)Number(t[1]),Number(t[2]);else if("cancel"==o)return void this.showReBar(!1);this.showReBar(!0,{opt:o,id:t})},HasDing:function(e,t){if(0==this.isLogin)return!1;for(var o=0;o<t.length;o++)if(t[o]==e)return!0;return!1},Ding:function(t,o){if(!o)if(0!=this.isLogin){var n=t.currentTarget.dataset.id.split("_"),i=n[0];u.command;if("R"==i){if(this.HasDing(d.USERDATA.uid,l.posting.likes))return;l.posting.likes.push(d.USERDATA.uid),l.posting.hasDing=!0,l.setData({posting:l.posting}),l.posting.writer.openid,e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"likes",data:d.USERDATA.uid},fail:function(e){uni.showModal({title:"点赞失败",content:e.errMsg,showCancel:!1})}})}else if("RE"==i){for(var s=Number(n[1]),a=0;a<l.response.length;a++)if(l.response[a].floor==s){if(this.HasDing(d.USERDATA.uid,l.response[a].likes))return void(l.response[a].hasDing=!0);l.response[a].likes.push(d.USERDATA.uid),l.response[a].hasDing=!0;break}l.setData({response:l.response}),l.response[s].openid,e.callFunction({name:"updatePostAddToSet",data:{doc:v,target:"response."+s+".likes",data:d.USERDATA.uid},success:console.log,fail:function(e){uni.showModal({title:"点赞失败",content:e.errMsg,showCancel:!1})}})}else if("RRE"==i)s=Number(n[1]),Number(n[2])}else uni.showModal({showCancel:!1,title:"提示",content:"登录后可操作"})},Reflesh:function(e){uni.showLoading({mask:!0,title:"加载帖子"});var t=function(e){if(e.data[0].status)return uni.hideLoading({success:function(e){}}),void uni.showModal({showCancel:!1,title:"提示",content:e.data[0].status,success:function(e){uni.navigateBack({delta:0})}});e=e.data[0],e={data:e},console.log(e),e=d.dealPostReport(e),e.data.relativetime=r.transTimes(e.data.time,!0,!1,"\n"),console.log(e),l.setData({posting:e.data,response:e.data.response,responseto:e.data.responseto}),l.posting.hasDing=l.HasDing(d.USERDATA.uid,l.posting.likes),console.log(1);for(var t=0;t<l.response.length;t++)l.response[t].floor=t,l.response[t].hasDing=l.HasDing(d.USERDATA.uid,l.response[t].likes),l.response[t].relativetime=r.transTimes(l.response[t].time,!1,!1);var o=l.sort_mode[l.sort_modeid];"时间倒序"==o&&(l.response=l.cal_sort(l.response,"time",!0)),"热度倒序"==o&&(l.response=l.cal_sort(l.response,"likes",!0)),"时间正序"==o&&(l.response=l.cal_sort(l.response,"time",!1)),l.responsefloor={};for(t=0;t<l.responseto.length;t++)"object"!==(0,i.default)(l.responsefloor[Number(l.responseto[t].tofloor)])&&(l.responsefloor[Number(l.responseto[t].tofloor)]=[]),l.responseto[t].refloorid=l.responsefloor[Number(l.responseto[t].tofloor)].length,l.responseto[t].relativetime=r.transTimes(l.responseto[t].time,!1,!1),l.responseto[t].index=t,l.responsefloor[Number(l.responseto[t].tofloor)].push(l.responseto[t]);console.log(e.data),l.setData({posting:e.data,writer:e.data.writer,response:e.data.response,responseto:e.data.responseto,responsefloor:l.responsefloor}),uni.hideLoading({success:function(e){}})};"object"==(0,i.default)(e)&&t({data:[e]}),(0,a.cbq)(p.doc(v).get(),{success:t,fail:function(e){uni.hideLoading(),console.error(e),l.setData({posting:null,tip:"加载失败"})},complete:function(e){uni.stopPullDownRefresh({success:function(e){}})}})}}};t.default=m}).call(this,o("a9ff")["default"])},"650c":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",{style:e.COLORTHEMECOMMON},[o("v-uni-view",{staticClass:"pagecontent",style:e.COLORTHEMESTYLE},[o("v-uni-view",{staticStyle:{padding:"20rpx",width:"710rpx"}},[null===e.posting?o("v-uni-view",{staticClass:"texttitle",staticStyle:{"padding-top":"15rpx"}},[e._v(e._s(e.tip))]):o("v-uni-view",[o("v-uni-view",{staticClass:"Ncontain",style:"padding-top:2vw;"},[o("v-uni-view",{staticClass:"texttitle"},[e._v(e._s(e.posting.title))]),e.posting.reStatus&&e.hideDel?e._e():o("v-uni-view",{staticClass:"textcontent",staticStyle:{"padding-top":"15rpx"}},[e.posting.reStatus?e._e():o("v-uni-rich-text",{staticClass:"SELECT",staticStyle:{"white-space":"pre-wrap"},attrs:{nodes:e.m.dealPost(e.posting.content)}}),e.posting.reStatus&&!e.hideDel?o("v-uni-rich-text",{staticClass:"text",attrs:{nodes:e.m.dealPost(e.posting.reStatus)}}):e._e()],1),o("v-uni-view",{staticClass:"tools",staticStyle:{color:"var(--color-title)"}},[o("v-uni-view",{staticClass:"Nrow",staticStyle:{padding:"0"}},[o("v-uni-view",{staticClass:"textline",staticStyle:{"margin-right":"20rpx"},style:"color: var(--color-link)"},[e._v(e._s(e.writer.name))]),o("v-uni-view",{staticClass:"texttip",staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(e.posting.relativetime))])],1),o("v-uni-view",{staticClass:"Nrow",staticStyle:{padding:"0",color:"var(--color-text)"}},[o("v-uni-view",{staticClass:"texttip iconfont icon-jubao",staticStyle:{"margin-right":"30rpx"},attrs:{"data-id":"R"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delRe(t,!e.posting.reStatus)}}}),o("v-uni-view",{class:"texttip iconfont "+(!0===e.posting.hasDing?"icon-dianzan1":"icon-dianzan"),attrs:{"data-id":"R"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.Ding(t,!0===e.posting.hasDing)}}},[e._v(e._s(e.posting.likes.length))])],1)],1)],1),o("v-uni-view",{staticClass:"DIVline"}),o("v-uni-view",{staticClass:"Ncontain"},[o("v-uni-view",{staticClass:"tools"},[o("v-uni-view",{staticClass:"Nrow",staticStyle:{padding:"0"}},[o("v-uni-view",{style:"color:var(--color-subtitle);padding:0 22.5rpx 0 0",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideDelFun.apply(void 0,arguments)}}},[e._v(e._s(e.hideDel?"显示":"隐藏")+"删除内容")]),o("v-uni-view",{style:"color:var(--color-subtitle);padding:0 0 0 0"})],1),o("v-uni-view",{staticClass:"HOVERN",style:"color:var(--color-subtitle);padding:0 0 0 0",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeSortMode.apply(void 0,arguments)}}},[e._v(e._s(e.sort_mode[e.sort_modeid])+" >")])],1),e._l(e.response,(function(t,n){return o("v-uni-view",{key:n},[o("v-uni-view",{staticClass:"DIVline"}),t.reStatus&&e.hideDel?e._e():o("v-uni-view",{staticClass:"floor"},[o("v-uni-view",{staticClass:"HOVER",staticStyle:{"border-radius":"22.5rpx"},attrs:{"data-id":"RE_"+t.floor},on:{longpress:function(o){arguments[0]=o=e.$handleEvent(o),e.delRe(o,!t.reStatus)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.Response.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"Nrow",style:"justify-content: left;"},[o("v-uni-view",{staticClass:"text",style:"color:var(--color-link)"},[e._v(e._s(t.name))])],1),o("v-uni-view",{staticClass:"textrecontain"},[t.reStatus?e._e():o("v-uni-rich-text",{staticClass:"textrecontent",attrs:{nodes:e.m.dealPostContent(t.content)}}),t.reStatus&&!e.hideDel?o("v-uni-rich-text",{staticClass:"text",style:"color: var(--color-link)",attrs:{nodes:t.reStatus}}):e._e()],1)],1),e.responsefloor[t.floor]?o("v-uni-view",{staticClass:"pinglun"},e._l(e.responsefloor[t.floor],(function(n,i){return o("v-uni-view",[n.reStatus&&e.hideDel?e._e():o("v-uni-view",{staticClass:"recontain HOVER",staticStyle:{"border-radius":"7.5rpx"},attrs:{"data-id":"RRE_"+t.floor+"_"+n.refloorid},on:{longpress:function(t){arguments[0]=t=e.$handleEvent(t),e.delRe(t,!n.reStatus)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.Response.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"textreh iconfont icon-jubao",staticStyle:{"margin-left":"10rpx"},attrs:{"data-id":"RRE_"+t.floor+"_"+n.refloorid},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delRe(t,!n.reStatus)}}}),o("v-uni-view",{staticClass:"textreh",style:"color:var(--color-link);margin:0 10rpx 0 10rpx"},[e._v(e._s(n.name))]),n.reStatus?e._e():o("v-uni-rich-text",{staticClass:"textre SELECT",style:"color:var(--color-text)",attrs:{nodes:e.m.dealPostContent(n.content)}}),n.reStatus&&!e.hideDel?o("v-uni-rich-text",{staticClass:"text",style:"color: var(--color-link)",attrs:{nodes:n.reStatus}}):e._e()],1)],1)})),1):e._e(),o("v-uni-view",{staticClass:"tools"},[o("v-uni-view",{staticClass:"texttip"},[e._v(e._s(t.floor+1)+"楼\n                  "+e._s(t.relativetime))]),o("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[o("v-uni-view",{staticClass:"iconfont icon-jubao",staticStyle:{"margin-right":"30rpx"},attrs:{"data-id":"RE_"+t.floor},on:{click:function(o){arguments[0]=o=e.$handleEvent(o),e.delRe(o,!t.reStatus)}}}),o("v-uni-view",{class:"texttip iconfont "+(!0===t.hasDing?"icon-dianzan1":"icon-dianzan"),attrs:{"data-id":"RE_"+t.floor},on:{click:function(o){arguments[0]=o=e.$handleEvent(o),e.Ding(o,!0===t.hasDing)}}},[e._v(e._s(t.likes.length))])],1)],1)],1)],1)}))],2)],1),o("v-uni-view",{staticStyle:{height:"30vh"}})],1)],1),e.showRe||e.APPSET.POSTHIDERE?e._e():o("v-uni-view",{staticClass:"iconfont icon-tianjia TPOSTadd_icon",attrs:{"data-id":"R"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.Response.apply(void 0,arguments)}}}),e.showRe?o("v-uni-view",{staticClass:"rebar"},[o("v-uni-view",{staticClass:"rebarrow"},[o("v-uni-button",{staticClass:"iconfont icon-cuo",staticStyle:{width:"min-content","font-size":"30rpx",margin:"0 20rpx 0 0"},attrs:{sina:!0,"data-id":"cancel"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.Response.apply(void 0,arguments)}}}),o("v-uni-view",{staticClass:"texttip",staticStyle:{"margin-right":"0rpx"}},[e._v(e._s(e.re_holder))])],1),e.APPSET.POSTRE||e.SUPERADMIN?[e.isLogin?o("v-uni-view",{staticClass:"rebarrow"},[o("v-uni-input",{staticClass:"reinput",attrs:{focus:!0,placeholder:e.re_holder,"placeholder-class":"reinputplaceholder",value:e.reinputvalue},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.Rechange.apply(void 0,arguments)}}}),o("v-uni-button",{staticClass:"sendbtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ReComfirm.apply(void 0,arguments)}}},[e._v("发送")])],1):o("v-uni-view",{staticClass:"rebarrow"},[o("v-uni-input",{staticClass:"reinput",attrs:{focus:!0,placeholder:"登录后可回复",disabled:!0,"placeholder-class":"reinputplaceholder"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.Rechange.apply(void 0,arguments)}}}),o("v-uni-button",{staticClass:"sendbtn"},[e._v("发送")])],1)]:o("v-uni-view",[o("v-uni-view",{staticClass:"rebarrow"},[o("v-uni-input",{staticClass:"MODELinput reinput",attrs:{focus:!0,placeholder:"贴吧回复功能关闭",disabled:!0,"placeholder-class":"reinputplaceholder"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.Rechange.apply(void 0,arguments)}}}),o("v-uni-button",{staticClass:"sendbtn"},[e._v("发送")])],1)],1)],2):e._e()],1)},i=[]},6798:function(e,t,o){"use strict";o.r(t);var n=o("650c"),i=o("1758");for(var s in i)["default"].indexOf(s)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(s);o("cc4b");var a=o("f0c5"),r=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,"545ab540",null,!1,n["a"],void 0);t["default"]=r.exports},7515:function(e,t,o){var n=o("896b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=o("4f06").default;i("42893094",n,!0,{sourceMap:!1,shadowMode:!1})},"896b":function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,".texttitle[data-v-545ab540]{font-size:%?40?%;font-weight:600;padding-left:%?10?%}.pinglun[data-v-545ab540]{border-radius:%?20?%;padding:%?10?% 0;display:block;background-color:var(--color-blk-back)}.tools[data-v-545ab540]{display:flex;justify-content:space-between;text-align:center;align-items:center;padding:%?10?% %?0?%}.floor[data-v-545ab540]{padding:%?20?% 0}.textrecontain[data-v-545ab540]{margin:%?7.5?% 0;padding:%?7.5?%}.textrecontent[data-v-545ab540]{font-size:%?30?%;white-space:pre-wrap;max-height:40vh;overflow-y:scroll;overflow-x:hidden;word-break:break-all}.textcontent[data-v-545ab540]{font-size:%?30?%;white-space:pre-wrap;padding:%?7.5?%;max-height:75vh;overflow-y:scroll;overflow-x:hidden;word-break:break-all;margin:%?7.5?% 0}.text[data-v-545ab540]{font-size:%?30?%;white-space:pre-wrap}.textline[data-v-545ab540]{font-size:%?30?%;white-space:pre-line;display:inline;line-height:%?30?%;height:%?30?%;overflow-y:hidden;overflow-x:scroll;max-width:%?260?%}.textre[data-v-545ab540]{font-size:%?26?%;white-space:pre-wrap;word-break:break-all;max-width:%?550?%;max-height:%?150?%;overflow-x:hidden;overflow-y:scroll}.recontain[data-v-545ab540]{display:flex;justify-content:left;text-align:left;align-items:center;padding:%?5?%}.texttip[data-v-545ab540]{font-size:%?30?%;display:inline;overflow-y:hidden;overflow-x:scroll}.rebar[data-v-545ab540]{position:fixed;bottom:0;padding:%?30?%;width:%?690?%;background-color:var(--color-blk-back2)}.rebarrow[data-v-545ab540]{display:flex;justify-content:space-between;align-items:center;text-align:left;margin:%?20?% 0}.textreh[data-v-545ab540]{font-size:%?28?%;white-space:normal;display:inline;max-width:%?250?%;overflow-x:scroll;overflow-y:hidden}.DIVline[data-v-545ab540]{width:100%;height:%?5?%;background-color:var(--color-border)}.TPOSTadd_icon[data-v-545ab540]{color:var(--color-text);background-color:var(--color-blk-back2);border-color:var(--color-border);border-radius:%?100?%;height:%?100?%;width:%?100?%;font-size:%?50?%;display:flex;justify-content:center;align-items:center;z-index:100;float:right;position:fixed;bottom:%?50?%;left:%?50?%}.sendbtn[data-v-545ab540]{margin-left:%?20?%;width:%?150?%;font-size:%?30?%}.reinput[data-v-545ab540]{width:%?500?%;color:var(--color-btn-text);background-color:var(--color-main);font-size:%?30?%;height:%?70?%}.reinputplaceholder[data-v-545ab540]{color:var(--color-btn-title)}",""]),e.exports=t},cc4b:function(e,t,o){"use strict";var n=o("7515"),i=o.n(n);i.a},d3e5:function(e,t,o){"use strict";o("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.ca=void 0,t.request=l,t.showFail=r;o("51b3"),o("460c");var n=getApp(),i=n.globalData,s=i.ENCRYPTO,a="加载";function r(e,t){"string"!=typeof t&&(t=a),uni.hideLoading(),uni.showModal({title:t+"失败",content:e,showCancel:!1})}function l(e){var t,o,n,l,c=e.title,d=e.tipShow,u=e.tipOption,p=e.tipActionCancel,f=e.tipActionSuccess,v=(e.packPublicKey,e.data),h=e.keyOption,g=e.optionUrl,m=e.urlPath,w=e.success,b=e.fail;if("boolean"!=typeof d&&(d=!0),"string"!=typeof c&&(c="加载"),a=c,console.log("开始请求",c,e),d){if(!u)return void console.error("使用tipShow请传入tipOption");if(t=u.WAIT,o=u.tipText,n=u.tipSubText,l=u.cancelText,!t)return void console.error("使用tipShow请传入tipOption.WAIT，请使用当前显示页面的WAITObj！");o||(o="正在"+c),n||(n="请稍后"),l||(l="取消")}var C={};d&&i.showWait(t,o,n,l,(function(e,t){if(e){if("function"==typeof f&&f(t))return;t()}else{if("function"==typeof C.abort&&C.abort(),"function"==typeof p&&p(t))return;t()}})),console.log("keyoption=",h);var R=s.cover.packData(v,!0,h),S="http://"+i.ServerUrl+"/"+i.AppServerName+"/"+m;console.log(m),g&&(S=m),console.log(S),C=uni.request({url:S,method:"POST",header:{"content-type":"application/json"},data:R,responseType:"json",sslVerify:!1,firstIpv4:!0,success:function(e){if(console.log("收到数据",e),200!=e.statusCode)return d&&i.hideWait(t,!1),void r("服务器错误："+e.data.error,c);var o=s.cover.unpackData(e.data),n=function(e){"boolean"!=typeof e&&(e=!0),d&&i.hideWait(t,e)};"function"==typeof w&&w(o,n)||n()},fail:function(e){console.log("请求失败",e);var o=function(){(d||"function"!=typeof b)&&r("错误："+e.errMsg,c),d&&i.hideWait(t,!1)};"function"==typeof b&&(d&&r("错误："+e.errMsg,c),b(e,o))||o()}})}var c=o("ffcd"),d=o("1818"),u={getPublicKey:c.ca.getPublicKey,getPublicSignKey:c.ca.getPublicSignKey,querySignValid:function(e,t,o){return uni.showLoading({title:"签名验证中"}),d.verifySign(e,t,this.getPublicSignKey())?(console.log(i.CAURL),l({tipShow:!1,title:"验证签名",optionUrl:!0,urlPath:i.CAURL+"queryB",keyOption:this.getPublicKey(),data:{certificate:t},success:function(t,n){if(uni.hideLoading(),t.status){if(1==t.data){var i=JSON.parse(e).data;o(i)}else o("");n(!0)}else n(!1),server.showFail(t.errMsg);return!0},fail:function(){uni.hideLoading(),o("")}}),!0):(uni.hideLoading(),!1)}};t.ca=u}}]);