(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"42d0":function(t,e,i){"use strict";var n=i("7676"),a=i.n(n);a.a},"5b07":function(t,e,i){"use strict";i.r(e);var n=i("bce6"),a=i("9683");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("42d0");var s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"210a93ed",null,!1,n["a"],void 0);e["default"]=c.exports},7676:function(t,e,i){var n=i("880f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("67ec3a7c",n,!0,{sourceMap:!1,shadowMode:!1})},"880f":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".content[data-v-210a93ed]{display:flex;flex-direction:column;align-items:center;justify-content:center}.logo[data-v-210a93ed]{height:%?200?%;width:%?200?%;margin-top:%?200?%;margin-left:auto;margin-right:auto;margin-bottom:%?50?%}.text-area[data-v-210a93ed]{display:flex;justify-content:center}.title[data-v-210a93ed]{font-size:%?36?%;color:#8f8f94}",""]),t.exports=e},9683:function(t,e,i){"use strict";i.r(e);var n=i("c461"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},bce6:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{style:t.COLORTHEMECOMMON},[i("v-uni-view",{staticClass:"pagecontent",style:t.COLORTHEMESTYLE},[t.show_apploading?[i("v-uni-view",{staticClass:"loadingpage"},[i("v-uni-view",{staticClass:"loadingtop"},[i("v-uni-image",{staticClass:"loadingphoto",attrs:{mode:"aspectFit",src:"/static/images/logo.jpg"}})],1),i("v-uni-view",{staticClass:"loadingtext",staticStyle:{"margin-top":"10vh"}},[t._v("哈工大电脑110俱乐部")]),t.show_loadingerr?i("v-uni-view",{staticStyle:{"margin-top":"5vh"}},[i("v-uni-text",{staticClass:"loadingtip"},[t._v(t._s(t.show_loadingerr))]),i("v-uni-button",{staticStyle:{margin:"50rpx auto"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getReady.apply(void 0,arguments)}}},[t._v("重新连接")])],1):i("v-uni-view",{staticStyle:{"margin-top":"5vh"}},[i("v-uni-image",{staticClass:"loadingicon",attrs:{mode:"aspectFill",src:"/static/images/LOADING.gif"}})],1)],1)]:[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"loadingtop"},[i("v-uni-image",{staticClass:"loadingphoto",attrs:{mode:"aspectFit",src:"/static/images/logo.jpg"}})],1),i("v-uni-view",{staticClass:"loadingtext",staticStyle:{"margin-top":"10vh"}},[t._v("哈工大电脑110俱乐部")]),i("v-uni-view",{staticClass:"text-area"},[i("v-uni-text",{staticClass:"title"},[t._v("将于"+t._s(t.enterTime-t.timeCount)+"秒后进入")])],1)],1)]],2)],1)},a=[]},c461:function(t,e,i){"use strict";(function(t){i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d3b7"),i("ddb0");i("51b3"),i("460c");var n=null,a=getApp(),o=a.globalData,s=i("d3e5"),c=t.database(),r=(c.collection("Set"),{data:function(){return{COLORTHEMECOMMON:o.COLORTHEMECOMMON,COLORTHEME:o.COLORTHEME,COLORTHEMESTYLE:o.COLORTHEMESTYLE,THEMEID:o.THEMEID,THEMETYPE:o.THEMETYPE,THEMELIST:o.THEMELIST,VERSION:o.VERSION,AD:o.AD,show_apploading:!0,show_loadingerr:"",enterTime:1,timeCount:0}},onLoad:function(){n=this,n.getReady()},methods:{getAppPublicKey:function(t){var e=i("ffcd");console.log("开始验证签名"),o.skipSign?t(!0):s.ca.querySignValid(e.ca.getTempSignData(),e.ca.getTempSign(),(function(e){e&&(o.PUBLICKEY=e,o.ENCRYPTO.keys.ca.setPubKey(e),t(!0)),t(!1)}))||t(!1)},getReady:function(t,e){e&&(o.skipSign=!0),n.show_apploading=!0,n.show_loadingerr="",o.ServerReady((function(){console.log("开始DH获取签名"),n.getAppPublicKey((function(t){if(o.AppInit.status&&t)return n.show_apploading=!1,void uni.redirectTo({url:"/pages/main/main"});n.show_loadingerr=t?o.AppInit.info:"签名验证失败"}))}))}}});e.default=r}).call(this,i("a9ff")["default"])},d3e5:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.ca=void 0,e.request=r,e.showFail=c;i("51b3"),i("460c");var n=getApp(),a=n.globalData,o=a.ENCRYPTO,s="加载";function c(t,e){"string"!=typeof e&&(e=s),uni.hideLoading(),uni.showModal({title:e+"失败",content:t,showCancel:!1})}function r(t){var e,i,n,r,l=t.title,u=t.tipShow,d=t.tipOption,f=t.tipActionCancel,p=t.tipActionSuccess,g=(t.packPublicKey,t.data),v=t.keyOption,h=t.optionUrl,y=t.urlPath,E=t.success,O=t.fail;if("boolean"!=typeof u&&(u=!0),"string"!=typeof l&&(l="加载"),s=l,console.log("开始请求",l,t),u){if(!d)return void console.error("使用tipShow请传入tipOption");if(e=d.WAIT,i=d.tipText,n=d.tipSubText,r=d.cancelText,!e)return void console.error("使用tipShow请传入tipOption.WAIT，请使用当前显示页面的WAITObj！");i||(i="正在"+l),n||(n="请稍后"),r||(r="取消")}var w={};u&&a.showWait(e,i,n,r,(function(t,e){if(t){if("function"==typeof p&&p(e))return;e()}else{if("function"==typeof w.abort&&w.abort(),"function"==typeof f&&f(e))return;e()}})),console.log("keyoption=",v);var b=o.cover.packData(g,!0,v),T="http://"+a.ServerUrl+"/"+a.AppServerName+"/"+y;console.log(y),h&&(T=y),console.log(T),w=uni.request({url:T,method:"POST",header:{"content-type":"application/json"},data:b,responseType:"json",sslVerify:!1,firstIpv4:!0,success:function(t){if(console.log("收到数据",t),200!=t.statusCode)return u&&a.hideWait(e,!1),void c("服务器错误："+t.data.error,l);var i=o.cover.unpackData(t.data),n=function(t){"boolean"!=typeof t&&(t=!0),u&&a.hideWait(e,t)};"function"==typeof E&&E(i,n)||n()},fail:function(t){console.log("请求失败",t);var i=function(){(u||"function"!=typeof O)&&c("错误："+t.errMsg,l),u&&a.hideWait(e,!1)};"function"==typeof O&&(u&&c("错误："+t.errMsg,l),O(t,i))||i()}})}var l=i("ffcd"),u=i("1818"),d={getPublicKey:l.ca.getPublicKey,getPublicSignKey:l.ca.getPublicSignKey,querySignValid:function(t,e,i){return uni.showLoading({title:"签名验证中"}),u.verifySign(t,e,this.getPublicSignKey())?(console.log(a.CAURL),r({tipShow:!1,title:"验证签名",optionUrl:!0,urlPath:a.CAURL+"queryB",keyOption:this.getPublicKey(),data:{certificate:e},success:function(e,n){if(uni.hideLoading(),e.status){if(1==e.data){var a=JSON.parse(t).data;i(a)}else i("");n(!0)}else n(!1),server.showFail(e.errMsg);return!0},fail:function(){uni.hideLoading(),i("")}}),!0):(uni.hideLoading(),!1)}};e.ca=d}}]);